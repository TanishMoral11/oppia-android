# TODO(#1532): Rename file to 'BUILD' post-Gradle.
"""
This package contains all third-party dependencies that app builds depend on.

Note to developers: all new dependencies should go in one of versions/direct_http_versions.bzl or
versions/direct_maven_versions.bzl, not here.

Furthermore, annotation processor plugins must be configured within this file by loading the tool's
corresponding setup macro.
"""

load(
    "//third_party/macros:direct_dep_loader.bzl",
    "create_direct_import_dependency_wrappers",
    "create_maven_dependency_wrappers",
)
load("//third_party/tools/glide:plugin_setup.bzl", set_up_glide_plugin = "set_up")
load("//third_party/versions:direct_http_versions.bzl", "DIRECT_REMOTE_DEPENDENCIES")
load("//third_party/versions:maven_config.bzl", "MAVEN_ARTIFACT_CONFIGURATION")

package_group(
    name = "app_prod_artifact_visibility",
    includes = [
        "//:oppia_api_visibility",
    ],
)

package_group(
    name = "app_test_artifact_visibility",
    includes = [
        "//:oppia_testing_visibility",
    ],
)

create_maven_dependency_wrappers(
    maven_artifact_config = MAVEN_ARTIFACT_CONFIGURATION,
    maven_repository_name = "maven_app",
    prod_artifact_visibility = [":app_prod_artifact_visibility"],
    test_artifact_visibility = [":app_test_artifact_visibility"],
)

create_direct_import_dependency_wrappers(
    dependency_imports_details = DIRECT_REMOTE_DEPENDENCIES,
    maven_artifact_visibility = ["@maven_app//:__pkg__"],
    prod_artifact_visibility = [":app_prod_artifact_visibility"],
    test_artifact_visibility = [":app_test_artifact_visibility"],
)

set_up_glide_plugin(
    name = "glide_compiler",
    glide_compiler_dep = "//third_party:com_github_bumptech_glide_compiler",
    visibility = [":app_prod_artifact_visibility"],
)
